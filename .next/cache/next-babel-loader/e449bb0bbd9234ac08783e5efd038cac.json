{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport record from \"../../ethereum/record\";\nimport web3 from \"../../ethereum/web3\";\n\nvar recordShow = /*#__PURE__*/function (_Component) {\n  _inherits(recordShow, _Component);\n\n  var _super = _createSuper(recordShow);\n\n  function recordShow() {\n    _classCallCheck(this, recordShow);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(recordShow, [{\n    key: \"render\",\n    value: function render() {\n      console.log(this.props.NameAndImage, this.props.details, this.props.accounts);\n      return /*#__PURE__*/_jsx(Layout, {\n        children: /*#__PURE__*/_jsx(\"h1\", {\n          children: \"Your details are here!!\"\n        })\n      });\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(props) {\n        var accounts, currentRecord, NameAndImage, details, prescriptionlength, reportLength, presciptions, i, reports;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return web3.eth.getAccounts();\n\n              case 2:\n                accounts = _context.sent;\n                currentRecord = record(props.query.address);\n                _context.next = 6;\n                return currentRecord.methods.getNameandAddress().call({\n                  from: accounts[0]\n                });\n\n              case 6:\n                NameAndImage = _context.sent;\n                _context.next = 9;\n                return currentRecord.methods.getDetails().call({\n                  from: accounts[0]\n                });\n\n              case 9:\n                details = _context.sent;\n                _context.next = 12;\n                return currentRecord.methods.getPrescriptionLength().call({\n                  from: accounts[0]\n                });\n\n              case 12:\n                prescriptionlength = _context.sent;\n                _context.next = 15;\n                return currentRecord.methods.getReportLength().call({\n                  from: accounts[0]\n                });\n\n              case 15:\n                reportLength = _context.sent;\n                presciptions = [];\n                i = 0;\n\n              case 18:\n                if (!(i < prescriptionlength)) {\n                  _context.next = 27;\n                  break;\n                }\n\n                _context.t0 = presciptions;\n                _context.next = 22;\n                return currentRecord.methods.getPrescription().call({\n                  from: accounts[0]\n                });\n\n              case 22:\n                _context.t1 = _context.sent;\n\n                _context.t0.push.call(_context.t0, _context.t1);\n\n              case 24:\n                i++;\n                _context.next = 18;\n                break;\n\n              case 27:\n                reports = [];\n                i = 0;\n\n              case 29:\n                if (!(i < reportLength)) {\n                  _context.next = 38;\n                  break;\n                }\n\n                _context.t2 = presciptions;\n                _context.next = 33;\n                return reports.methods.getReport().call({\n                  from: accounts[0]\n                });\n\n              case 33:\n                _context.t3 = _context.sent;\n\n                _context.t2.push.call(_context.t2, _context.t3);\n\n              case 35:\n                i++;\n                _context.next = 29;\n                break;\n\n              case 38:\n                return _context.abrupt(\"return\", {\n                  NameAndImage: NameAndImage,\n                  details: details,\n                  accounts: accounts,\n                  reports: reports,\n                  prescriptions: prescriptions\n                });\n\n              case 39:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return recordShow;\n}(Component);\n\nexport default recordShow;","map":{"version":3,"sources":["F:/Securing health records using blockchain/pages/Records/show.js"],"names":["React","Component","Layout","record","web3","recordShow","console","log","props","NameAndImage","details","accounts","eth","getAccounts","currentRecord","query","address","methods","getNameandAddress","call","from","getDetails","getPrescriptionLength","prescriptionlength","getReportLength","reportLength","presciptions","i","getPrescription","push","reports","getReport","prescriptions"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,MAAP,MAAmB,uBAAnB;AACA,OAAOC,IAAP,MAAiB,qBAAjB;;IAEMC,U;;;;;;;;;;;;;6BAgCK;AACPC,MAAAA,OAAO,CAACC,GAAR,CACE,KAAKC,KAAL,CAAWC,YADb,EAEE,KAAKD,KAAL,CAAWE,OAFb,EAGE,KAAKF,KAAL,CAAWG,QAHb;AAKA,0BACE,KAAC,MAAD;AAAA,+BACE;AAAA;AAAA;AADF,QADF;AAKD;;;;uGA1C4BH,K;;;;;;;uBACJJ,IAAI,CAACQ,GAAL,CAASC,WAAT,E;;;AAAjBF,gBAAAA,Q;AACAG,gBAAAA,a,GAAgBX,MAAM,CAACK,KAAK,CAACO,KAAN,CAAYC,OAAb,C;;uBACDF,aAAa,CAACG,OAAd,CACxBC,iBADwB,GAExBC,IAFwB,CAEnB;AAAEC,kBAAAA,IAAI,EAAET,QAAQ,CAAC,CAAD;AAAhB,iBAFmB,C;;;AAArBF,gBAAAA,Y;;uBAGgBK,aAAa,CAACG,OAAd,CACnBI,UADmB,GAEnBF,IAFmB,CAEd;AAAEC,kBAAAA,IAAI,EAAET,QAAQ,CAAC,CAAD;AAAhB,iBAFc,C;;;AAAhBD,gBAAAA,O;;uBAG2BI,aAAa,CAACG,OAAd,CAC9BK,qBAD8B,GAE9BH,IAF8B,CAEzB;AAAEC,kBAAAA,IAAI,EAAET,QAAQ,CAAC,CAAD;AAAhB,iBAFyB,C;;;AAA3BY,gBAAAA,kB;;uBAGqBT,aAAa,CAACG,OAAd,CACxBO,eADwB,GAExBL,IAFwB,CAEnB;AAAEC,kBAAAA,IAAI,EAAET,QAAQ,CAAC,CAAD;AAAhB,iBAFmB,C;;;AAArBc,gBAAAA,Y;AAGAC,gBAAAA,Y,GAAe,E;AACZC,gBAAAA,C,GAAI,C;;;sBAAGA,CAAC,GAAGJ,kB;;;;;8BAClBG,Y;;uBACQZ,aAAa,CAACG,OAAd,CACHW,eADG,GAEHT,IAFG,CAEE;AAAEC,kBAAAA,IAAI,EAAET,QAAQ,CAAC,CAAD;AAAhB,iBAFF,C;;;;;4BADKkB,I;;;AADyBF,gBAAAA,CAAC,E;;;;;AAOnCG,gBAAAA,O,GAAU,E;AACPH,gBAAAA,C,GAAI,C;;;sBAAGA,CAAC,GAAGF,Y;;;;;8BAClBC,Y;;uBACQI,OAAO,CAACb,OAAR,CAAgBc,SAAhB,GAA4BZ,IAA5B,CAAiC;AAAEC,kBAAAA,IAAI,EAAET,QAAQ,CAAC,CAAD;AAAhB,iBAAjC,C;;;;;4BADKkB,I;;;AADmBF,gBAAAA,CAAC,E;;;;;iDAK5B;AAAElB,kBAAAA,YAAY,EAAZA,YAAF;AAAgBC,kBAAAA,OAAO,EAAPA,OAAhB;AAAyBC,kBAAAA,QAAQ,EAARA,QAAzB;AAAmCmB,kBAAAA,OAAO,EAAPA,OAAnC;AAA4CE,kBAAAA,aAAa,EAAbA;AAA5C,iB;;;;;;;;;;;;;;;;;;;EA9Bc/B,S;;AA8CzB,eAAeI,UAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport Layout from \"../../components/Layout\";\r\nimport record from \"../../ethereum/record\";\r\nimport web3 from \"../../ethereum/web3\";\r\n\r\nclass recordShow extends Component {\r\n  static async getInitialProps(props) {\r\n    const accounts = await web3.eth.getAccounts();\r\n    const currentRecord = record(props.query.address);\r\n    const NameAndImage = await currentRecord.methods\r\n      .getNameandAddress()\r\n      .call({ from: accounts[0] });\r\n    const details = await currentRecord.methods\r\n      .getDetails()\r\n      .call({ from: accounts[0] });\r\n    const prescriptionlength = await currentRecord.methods\r\n      .getPrescriptionLength()\r\n      .call({ from: accounts[0] });\r\n    const reportLength = await currentRecord.methods\r\n      .getReportLength()\r\n      .call({ from: accounts[0] });\r\n    const presciptions = [];\r\n    for (var i = 0; i < prescriptionlength; i++) {\r\n      presciptions.push(\r\n        await currentRecord.methods\r\n          .getPrescription()\r\n          .call({ from: accounts[0] })\r\n      );\r\n    }\r\n    const reports = [];\r\n    for (var i = 0; i < reportLength; i++) {\r\n      presciptions.push(\r\n        await reports.methods.getReport().call({ from: accounts[0] })\r\n      );\r\n    }\r\n    return { NameAndImage, details, accounts, reports, prescriptions };\r\n  }\r\n  render() {\r\n    console.log(\r\n      this.props.NameAndImage,\r\n      this.props.details,\r\n      this.props.accounts\r\n    );\r\n    return (\r\n      <Layout>\r\n        <h1>Your details are here!!</h1>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nexport default recordShow;\r\n"]},"metadata":{},"sourceType":"module"}